summarise(tweet_volume = mean(tweet_volume, na.rm = TRUE))
korea_trend %>%
group_by(trend) %>%
summarise(mean_tweet_volume = mean(tweet_volume, na.rm = TRUE)) %>%
arrange(desc(mean_tweet_volume))
korea_trend %>%
arrange(desc(tweet_volume))
library(rvest)
cloud_url %>%
read_html() %>%
html_nodes(xpath='//*[@id="main-content"]/article/div[2]/div[2]/div/div[1]/div[3]/table') %>%
html_table()
cloud_url <- "https://www.ciodive.com/news/iaas-Azure-AWS-Google-Cloud-Alibaba/559716/"
cloud_url %>%
read_html() %>%
html_nodes(xpath='//*[@id="main-content"]/article/div[2]/div[2]/div/div[1]/div[3]/table') %>%
html_table()
cloud_df <- cloud_url %>%
read_html() %>%
html_nodes(xpath='//*[@id="main-content"]/article/div[2]/div[2]/div/div[1]/div[3]/table') %>%
html_table() %>%
.[[1]]
cloud_df
setwd("C:/docs/ingest-data")
# Chunk 1
knitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE,
comment="", digits = 3, tidy = FALSE, prompt = FALSE, fig.align = 'center')
library(tidyverse)
# Chunk 2: rtweet-setup
# 0. 환경설정 -----
library(rtweet)  # install.packages("rtweet")
library(tidyverse)
tidyverse_tw <- search_tweets("#tidyverse", n = 100, include_rts = TRUE, lang = "en")
tidyverse_tw
# Chunk 3: trend-topics
trend_topics <- get_trends()
trend_topics %>%
DT::datatable()
# Chunk 4: available-trend-topics
availabel_trends <- trends_available()
availabel_trends %>%
filter(countryCode == "KR")
# Chunk 5: trend-korea
korea_woeid <- availabel_trends %>%
filter(countryCode == "KR", woeid == 23424868) %>%
select(woeid) %>%
pull(woeid)
korea_trend <- get_trends(korea_woeid)
korea_trend %>%
group_by(trend) %>%
summarise(mean_tweet_volume = mean(tweet_volume, na.rm = TRUE)) %>%
arrange(desc(mean_tweet_volume))
# Chunk 6: cloud-market-share
library(rvest)
cloud_url <- "https://www.ciodive.com/news/iaas-Azure-AWS-Google-Cloud-Alibaba/559716/"
cloud_df <- cloud_url %>%
read_html() %>%
html_nodes(xpath='//*[@id="main-content"]/article/div[2]/div[2]/div/div[1]/div[3]/table') %>%
html_table() %>%
.[[1]]
cloud_df %>%
cloud_df
cloud_df %>%
pivot_longer(cols=contains("Market"))
cloud_df %>%
select(contains(`Growth, 2017-2018`)) %>%
pivot_longer(cols=contains("Market"))
cloud_df %>%
select(-contains(`Growth, 2017-2018`)) %>%
pivot_longer(cols=contains("Market"))
names(cloud_df)
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market"))
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value))
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100)
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share,", "MS_"))
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_"))
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
ggplot(aes(x=name, y=value)) +
geom_col() +
facet_wrap(~Company)
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
ggplot(aes(x=name, y=value)) +
geom_line() +
geom_point() +
facet_wrap(~Company)
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
ggplot(aes(x=name, y=value)) +
geom_col() +
scale_y_continuous(labels = scales::comma) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)")
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
ggplot(aes(x=name, y=value)) +
geom_col() +
scale_y_continuous(labels = scales::percent) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)")
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
ggplot(aes(x=name, y=value)) +
geom_col() +
scale_y_continuous(labels = scales::percent(accuracy = 0)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)")
? scales::percent
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
ggplot(aes(x=name, y=value)) +
geom_col() +
scale_y_continuous(labels = scales::percent(accuracy = 0.1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)")
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
ggplot(aes(x=name, y=value)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 0.1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)")
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
ggplot(aes(x=name, y=value)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 0)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)")
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
ggplot(aes(x=name, y=value)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)")
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
ggplot(aes(x=name, y=value, fill=name)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)")
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_"))
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
mutate(Company = factor(Company, levels = c("Amazon", "Microsoft Azure", "Alibaba", "Google Cloud","IBM", "Others"))) %>%
ggplot(aes(x=name, y=value, fill=name)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)") +
theme(legend.position = "none")
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
mutate(Company = factor(Company, levels = c("Amazon", "Microsoft Azure", "Alibaba", "Google Cloud","IBM", "Others"))) %>%
ggplot(aes(x=name, y=value, fill=name)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)") +
theme(legend.position = "none") +
scale_color_discrete(values=c("red", "blue"))
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
mutate(Company = factor(Company, levels = c("Amazon", "Microsoft Azure", "Alibaba", "Google Cloud","IBM", "Others"))) %>%
ggplot(aes(x=name, y=value, fill=name)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)") +
theme(legend.position = "none") +
scale_fill_discrete(values=c("red", "blue"))
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
mutate(Company = factor(Company, levels = c("Amazon", "Microsoft Azure", "Alibaba", "Google Cloud","IBM", "Others"))) %>%
ggplot(aes(x=name, y=value, fill=name)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)") +
theme(legend.position = "none") +
scale_fill_manual(values=c("red", "blue"))
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
mutate(Company = factor(Company, levels = c("Amazon", "Microsoft Azure", "Alibaba", "Google Cloud","IBM", "Others"))) %>%
ggplot(aes(x=name, y=value, fill=name)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)") +
theme(legend.position = "none") +
scale_fill_manual(values=c("darkgray", "blue"))
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
mutate(Company = factor(Company, levels = c("Amazon", "Microsoft Azure", "Alibaba", "Google Cloud","IBM", "Others"))) %>%
ggplot(aes(x=name, y=value, fill=name)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)") +
theme(legend.position = "none") +
scale_fill_manual(values=c("darkgray", "blue")) +
theme_bw()
cloud_df %>%
select(-`Growth, 2017-2018`) %>%
pivot_longer(cols=contains("Market")) %>%
mutate(value = parse_number(value) / 100) %>%
mutate(name = str_replace(name, "Market share, ", "MS_")) %>%
mutate(Company = factor(Company, levels = c("Amazon", "Microsoft Azure", "Alibaba", "Google Cloud","IBM", "Others"))) %>%
ggplot(aes(x=name, y=value, fill=name)) +
geom_col() +
scale_y_continuous(labels = scales::label_percent(accuracy = 1)) +
facet_wrap(~Company) +
labs(x="", y="시장 점유율(%)") +
scale_fill_manual(values=c("darkgray", "blue")) +
theme_bw() +
theme(legend.position = "none")
aws_tw <- search_tweets("#AWS", n = 10000, include_rts = FALSE)
? search_tweets
View(aws_tw)
aws_tw <- search_tweets("#AWS", n = 100, include_rts = FALSE, lang="kr")
aws_tw
aws_tw <- search_tweets("#AWS", n = 100, include_rts = FALSE, lang="ko")
aws_tw
aws_tw <- search_tweets("#AWS", n = 18000, include_rts = FALSE, lang="ko")
azure_tw <- search_tweets("#Azure", n = 18000, include_rts = FALSE, lang="ko")
gcp_tw <- search_tweets("#GCP", n = 18000, include_rts = FALSE, lang="ko")
aws_tw
gcp_tw
aws_tw <- search_tweets("#AWS", n = 18000, include_rts = FALSE, lang="en")
azure_tw <- search_tweets("#Azure", n = 18000, include_rts = FALSE, lang="en")
gcp_tw <- search_tweets("#GCP", n = 18000, include_rts = FALSE, lang="en")
gcp_tw <- search_tweets("#GoogleCloud", n = 18000, include_rts = FALSE, lang="en")
gcp_tw <- search_tweets("#googlecloud", n = 18000, include_rts = FALSE, lang="en")
ts_data(aws_tw, by="days")
ts_data(aws_tw, by="hours")
?ts_data
aws_ts <- ts_data(aws_tw, by="hours")
ts_plot(aws_tw, by="hours")
alibaba_tw <- search_tweets("#AlibabaCloud", n = 18000, include_rts = FALSE, lang="ko")
alibaba_tw
alibaba_tw <- search_tweets("#AlibabaCloud", n = 18000, include_rts = FALSE, lang="en")
aws_tw <- search_tweets("#AWS", n = 18000, include_rts = FALSE)
azure_tw <- search_tweets("#Azure", n = 18000, include_rts = FALSE)
gcp_tw <- search_tweets("#googlecloud", n = 18000, include_rts = FALSE)
alibaba_tw <- search_tweets("#AlibabaCloud", n = 18000, include_rts = FALSE)
aws_tw <- search_tweets("#AWS", n = 1800, include_rts = FALSE)
azure_tw <- search_tweets("#Azure", n = 1800, include_rts = FALSE)
gcp_tw <- search_tweets("#googlecloud", n = 1800, include_rts = FALSE)
alibaba_tw <- search_tweets("#AlibabaCloud", n = 1800, include_rts = FALSE)
aws_ts <- ts_data(aws_tw, by="hours")
aws_ts <- ts_data(azure_tw, by="hours")
ts_plot(aws_tw, by="hours")
ts_plot(azure_tw, by="hours")
aws_ts
aws_tw %>%
left_join(azure_tw, by="time")
aws_tw
aws_ts_df <- ts_data(azure_tw, by="hours")
aws_ts_df <- ts_data(azure_tw, by="hours")
azure_ts_tw <- ts_data(azure_tw, by="hours")
gcp_ts_tw <- ts_data(gcp_tw, by="hours")
alibaba_ts_tw <- ts_data(alibaba_tw, by="hours")
aws_ts_df %>%
left_join(azure_ts_tw, by="time")
aws_ts_df
aws_ts_df %>%
rename(aws=n)
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n)
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n)
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time)
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, fill=name)) +
geom_line()
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, fill=name, group=name)) +
geom_line()
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, color=name, group=name)) +
geom_line()
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n)
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time)
aws_ts_df <- ts_data(aws_tw, by="hours")
azure_ts_tw <- ts_data(azure_tw, by="hours")
gcp_ts_tw <- ts_data(gcp_tw, by="hours")
alibaba_ts_tw <- ts_data(alibaba_tw, by="hours")
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, color=name, group=name)) +
geom_line()
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, color=name, group=name)) +
geom_line() +
labs(x="", y="트윗횟수") +
theme_bw() +
theme(legend.position = "top")
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, color=name, group=name)) +
geom_line() +
labs(x="", y="트윗횟수", color="클라우드 서비스") +
theme_bw() +
theme(legend.position = "top")
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, color=name, group=name)) +
geom_line() +
geom_point() +
labs(x="", y="트윗횟수", color="클라우드 서비스") +
theme_bw() +
theme(legend.position = "top")
library(tidyverse)
library(magick)
getwd()
char_image <- image_read("fig/white-character.jpeg")
char_image
char_image
library(tesseract)
eng <- tesseract("eng")
char_image %>%
.[[1]]
image_read(ifelse(input <.9, 1, 0) )
input <- char_image %>%
.[[1]] %>%
as.numeric() # cause numerics are just easier to work with
image_read(ifelse(input <.9, 1, 0) )
ifelse(input < .9, 1, 0)
ifelse(input < .9, 1, 0) %>%
image_read() %>%
image_resize('500x') %>% # make it smaller to work around the errors
tesseract::ocr()
ifelse(input < .9, 1, 0) %>%
image_read() %>%
image_resize('500x') %>% # make it smaller to work around the errors
tesseract::ocr( engine = "eng")
ifelse(input < .9, 1, 0) %>%
image_read() %>%
image_resize('500x') %>% # make it smaller to work around the errors
tesseract::ocr( engine = "eng")
ocr_characters <- ifelse(input < .9, 1, 0) %>%
image_read() %>%
image_resize('500x') %>% # make it smaller to work around the errors
tesseract::ocr( engine = "eng")
ocr_characters <- ifelse(input < .9, 1, 0) %>%
image_read() %>%
image_resize('500x') %>% # make it smaller to work around the errors
tesseract::ocr( engine = "eng") %>%
str_remove("\n")
ocr_characters
install.packages("stringdist")
library(stringdist)
ocr_characters
stringdist(label, ocr_characters)
library(stringdist)
label <- "TLC200 PRO 2019/10/31 17:33:00"
stringdist(label, ocr_characters)
