aws_tw
aws_tw <- search_tweets("#AWS", n = 100, include_rts = FALSE, lang="ko")
aws_tw
aws_tw <- search_tweets("#AWS", n = 18000, include_rts = FALSE, lang="ko")
azure_tw <- search_tweets("#Azure", n = 18000, include_rts = FALSE, lang="ko")
gcp_tw <- search_tweets("#GCP", n = 18000, include_rts = FALSE, lang="ko")
aws_tw
gcp_tw
aws_tw <- search_tweets("#AWS", n = 18000, include_rts = FALSE, lang="en")
azure_tw <- search_tweets("#Azure", n = 18000, include_rts = FALSE, lang="en")
gcp_tw <- search_tweets("#GCP", n = 18000, include_rts = FALSE, lang="en")
gcp_tw <- search_tweets("#GoogleCloud", n = 18000, include_rts = FALSE, lang="en")
gcp_tw <- search_tweets("#googlecloud", n = 18000, include_rts = FALSE, lang="en")
ts_data(aws_tw, by="days")
ts_data(aws_tw, by="hours")
?ts_data
aws_ts <- ts_data(aws_tw, by="hours")
ts_plot(aws_tw, by="hours")
alibaba_tw <- search_tweets("#AlibabaCloud", n = 18000, include_rts = FALSE, lang="ko")
alibaba_tw
alibaba_tw <- search_tweets("#AlibabaCloud", n = 18000, include_rts = FALSE, lang="en")
aws_tw <- search_tweets("#AWS", n = 18000, include_rts = FALSE)
azure_tw <- search_tweets("#Azure", n = 18000, include_rts = FALSE)
gcp_tw <- search_tweets("#googlecloud", n = 18000, include_rts = FALSE)
alibaba_tw <- search_tweets("#AlibabaCloud", n = 18000, include_rts = FALSE)
aws_tw <- search_tweets("#AWS", n = 1800, include_rts = FALSE)
azure_tw <- search_tweets("#Azure", n = 1800, include_rts = FALSE)
gcp_tw <- search_tweets("#googlecloud", n = 1800, include_rts = FALSE)
alibaba_tw <- search_tweets("#AlibabaCloud", n = 1800, include_rts = FALSE)
aws_ts <- ts_data(aws_tw, by="hours")
aws_ts <- ts_data(azure_tw, by="hours")
ts_plot(aws_tw, by="hours")
ts_plot(azure_tw, by="hours")
aws_ts
aws_tw %>%
left_join(azure_tw, by="time")
aws_tw
aws_ts_df <- ts_data(azure_tw, by="hours")
aws_ts_df <- ts_data(azure_tw, by="hours")
azure_ts_tw <- ts_data(azure_tw, by="hours")
gcp_ts_tw <- ts_data(gcp_tw, by="hours")
alibaba_ts_tw <- ts_data(alibaba_tw, by="hours")
aws_ts_df %>%
left_join(azure_ts_tw, by="time")
aws_ts_df
aws_ts_df %>%
rename(aws=n)
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n)
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n)
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time)
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, fill=name)) +
geom_line()
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, fill=name, group=name)) +
geom_line()
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, color=name, group=name)) +
geom_line()
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n)
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time)
aws_ts_df <- ts_data(aws_tw, by="hours")
azure_ts_tw <- ts_data(azure_tw, by="hours")
gcp_ts_tw <- ts_data(gcp_tw, by="hours")
alibaba_ts_tw <- ts_data(alibaba_tw, by="hours")
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, color=name, group=name)) +
geom_line()
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, color=name, group=name)) +
geom_line() +
labs(x="", y="트윗횟수") +
theme_bw() +
theme(legend.position = "top")
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, color=name, group=name)) +
geom_line() +
labs(x="", y="트윗횟수", color="클라우드 서비스") +
theme_bw() +
theme(legend.position = "top")
aws_ts_df %>%
rename(aws=n) %>%
left_join(azure_ts_tw, by="time") %>%
rename(azure=n) %>%
left_join(gcp_ts_tw, by="time") %>%
rename(google=n) %>%
left_join(alibaba_ts_tw, by="time") %>%
rename(alibaba=n) %>%
pivot_longer(-time) %>%
ggplot(aes(x=time, y=value, color=name, group=name)) +
geom_line() +
geom_point() +
labs(x="", y="트윗횟수", color="클라우드 서비스") +
theme_bw() +
theme(legend.position = "top")
library(tidyverse)
library(magick)
getwd()
char_image <- image_read("fig/white-character.jpeg")
char_image
char_image
library(tesseract)
eng <- tesseract("eng")
char_image %>%
.[[1]]
image_read(ifelse(input <.9, 1, 0) )
input <- char_image %>%
.[[1]] %>%
as.numeric() # cause numerics are just easier to work with
image_read(ifelse(input <.9, 1, 0) )
ifelse(input < .9, 1, 0)
ifelse(input < .9, 1, 0) %>%
image_read() %>%
image_resize('500x') %>% # make it smaller to work around the errors
tesseract::ocr()
ifelse(input < .9, 1, 0) %>%
image_read() %>%
image_resize('500x') %>% # make it smaller to work around the errors
tesseract::ocr( engine = "eng")
ifelse(input < .9, 1, 0) %>%
image_read() %>%
image_resize('500x') %>% # make it smaller to work around the errors
tesseract::ocr( engine = "eng")
ocr_characters <- ifelse(input < .9, 1, 0) %>%
image_read() %>%
image_resize('500x') %>% # make it smaller to work around the errors
tesseract::ocr( engine = "eng")
ocr_characters <- ifelse(input < .9, 1, 0) %>%
image_read() %>%
image_resize('500x') %>% # make it smaller to work around the errors
tesseract::ocr( engine = "eng") %>%
str_remove("\n")
ocr_characters
install.packages("stringdist")
library(stringdist)
ocr_characters
stringdist(label, ocr_characters)
library(stringdist)
label <- "TLC200 PRO 2019/10/31 17:33:00"
stringdist(label, ocr_characters)
library(tidyverse)
library(webshot)
webshot(url = "https://pbs.twimg.com/media/Dv3lKfjV4AAkIpY.jpg:large",
file = "fig/table-in-image.jpg")
remotes::install_github("rstudio/webshot2")
library(tidyverse)
library(webshot2)
webshot(url = "https://pbs.twimg.com/media/Dv3lKfjV4AAkIpY.jpg:large",
file = "fig/table-in-image.jpg")
webshot(url = "https://pbs.twimg.com/media/Dv3lKfjV4AAkIpY.jpg:large",
file = "fig/table-in-image.png")
library(magick)
image_read("fig/table-in-image.png")
library(tesseract)
table_text <- tesseract::ocr_data("fig/table-in-image.png", engine = eng)
table_text
library(tesseract)
table_text <- tesseract::ocr_data("fig/table-in-image.png", engine = "eng")
table_text
table_img %>%
image_crop(geometry_area(0, 0, 80, 25)) %>%
image_ocr() %>%
stringi::stri_split(fixed = "\n")
library(magick)
table_img <- image_read("fig/table-in-image.png")
table_img
table_img %>%
image_crop(geometry_area(0, 0, 80, 25)) %>%
image_ocr() %>%
stringi::stri_split(fixed = "\n")
table_img %>%
image_quantize(colorspace = 'gray')
table_img %>%
image_convert(colorspace = 'gray')
table_img %>%
image_convert(colorspace = 'gray') %>%
image_crop(geometry_area(0, 0, 80, 25))
table_img %>%
image_convert(colorspace = 'gray') %>%
image_crop(geometry_area(10, 0, 80, 25))
table_img %>%
image_convert(colorspace = 'gray') %>%
image_crop(geometry_area(10, 0, 80, 25))
table_img %>%
image_convert(colorspace = 'gray') %>%
image_crop(geometry_area(0, 0, 80, 25))
table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate() %>%
image_crop(geometry_area(0, 0, 80, 25))
table_img %>%
image_transparent("white", fuzz=82)
table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white")
table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate()
table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<")
table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate()
table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate() %>%
image_crop(geometry_area(0, 0, 80, 25))
table_img_processed <- table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate() %>%
image_crop(geometry_area(0, 0, 80, 25))
table_img_processed %>%
image_ocr() %>%
stringi::stri_split(fixed = "\n")
table_img_processed
table_img_processed
table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white")
table_img %>%
image_transparent("white", fuzz=82)
table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate()
url <- "https://pbs.twimg.com/media/Dv3pIsIUwAEdu--.jpg:large"
download.file(url, destfile = "fig/table.jpg")
# preprocessing
img <- image_read("table.jpg") %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate() %>%
image_crop(geometry_area(0, 0, 80, 25))
img
url <- "https://pbs.twimg.com/media/Dv3pIsIUwAEdu--.jpg:large"
download.file(url, destfile = "fig/table.jpg")
# preprocessing
img <- image_read("fig/table.jpg") %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate() %>%
image_crop(geometry_area(0, 0, 80, 25))
img
https://pbs.twimg.com/media/Dv3pIsIUwAEdu--.jpg:large
library(tidyverse)
library(webshot2)
webshot(url = "https://pbs.twimg.com/media/Dv3pIsIUwAEdu--.jpg:large",
file = "fig/table-in-image.png")
library(magick)
table_img <- image_read("fig/table-in-image.png")
table_img
library(tesseract)
table_text <- tesseract::ocr_data("fig/table-in-image.png", engine = "eng")
table_text
table_img_processed <- table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate() %>%
image_crop(geometry_area(0, 0, 80, 25))
table_img_processed
# preprocessing
img <- table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate() %>%
image_crop(geometry_area(0, 0, 80, 25))
img
url <- "https://pbs.twimg.com/media/Dv3pIsIUwAEdu--.jpg:large"
download.file(url, destfile = "fig/table.jpg")
# preprocessing
img <- image_read("fig/table.jpg") %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate() %>%
image_crop(geometry_area(0, 0, 80, 25))
img
table_img_processed <- image_read("fig/table.jpg") %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate() %>%
image_crop(geometry_area(0, 0, 80, 25))
table_img_processed
table_img_processed %>%
image_ocr() %>%
stringi::stri_split(fixed = "\n")
table_img
library(magick)
table_img <- image_read("fig/table.jpg")
table_img
library(tesseract)
table_text <- tesseract::ocr_data("fig/table-in-image.png", engine = "eng")
table_text
table_img_processed <- table_img %>%
image_transparent("white", fuzz=82) %>%
image_background("white") %>%
image_negate() %>%
image_morphology(method = "Thinning", kernel = "Rectangle:20x1+0+0^<") %>%
image_negate() %>%
image_crop(geometry_area(0, 0, 80, 25))
table_img_processed
table_text <- table_img_processed %>%
image_ocr() %>%
stringi::stri_split(fixed = "\n")
table_text
table_text %>%
stringi::stri_split(fixed = "\n")
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "‘"))
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "'")) %>%
.[[1]]
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "'")) %>%
.[[1]] %>%
purrr::map_df(~ tibble::tibble(Date = .[1], Price = .[2], Change = .[3])) %>%
dplyr::glimpse()
table_text
table_text %>%
.[[1]] %>%
stringi::stri_split(fixed = "\n")
table_text %>%
.[[1]] %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|\\)\\]"))
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|\\)\\]"))
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|\\)\\]")) %>%
.[[1]]
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|)]")) %>%
.[[1]]
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|\)\]"))
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|\\)\\]"))
View(table_text)
table_text[[1]]
whitelist <- glue::glue("1234567890|,\\.")
table_text <- tesseract::ocr(table_img_processed, engine = tesseract(language = "eng",
options = list(tessedit_char_whitelist = whitelist)))
table_text
table_text %>%
stringi::stri_split(fixed = "\n")
table_text %>%
stringi::stri_split(fixed = "\n") %>%
.[[1]]
table_text %>%
stringi::stri_split(fixed = "\n") %>%
.[[1]] %>%
str_split(pattern = "|")
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|")) %>%
.[[1]]
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|")) %>%
.[[1]] %>%
purrr::map_df(~ tibble::tibble(Date = .[1], Price = .[2], Change = .[3], Cor30 = .[4])) %>%
dplyr::glimpse()
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|")) %>%
.[[1]] %>%
purrr::map_df(~ tibble::tibble(Date = .[1], Price = .[2], Change = .[3], Corr30 = .[4], HV30 = .[5])) %>%
dplyr::glimpse()
whitelist <- glue::glue("1234567890-|,\\.")
table_text <- tesseract::ocr(table_img_processed, engine = tesseract(language = "eng",
options = list(tessedit_char_whitelist = whitelist)))
table_text
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|")) %>%
.[[1]] %>%
purrr::map_df(~ tibble::tibble(Date = .[1], Price = .[2], Change = .[3], Corr30 = .[4], HV30 = .[5])) %>%
dplyr::glimpse()
whitelist <- glue::glue("1234567890-|/,\\.")
table_text <- tesseract::ocr(table_img_processed, engine = tesseract(language = "eng",
options = list(tessedit_char_whitelist = whitelist)))
table_text
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|")) %>%
.[[1]] %>%
purrr::map_df(~ tibble::tibble(Date = .[1], Price = .[2], Change = .[3], Corr30 = .[4], HV30 = .[5])) %>%
dplyr::glimpse()
table_text %>% head(30)
table_text %>% head(20)
table_text %>%
stringi::stri_split(fixed = "\n") %>%
purrr::map(~ stringi::stri_split(str = ., fixed = "|")) %>%
.[[1]] %>%
purrr::map_df(~ tibble::tibble(Date = .[1], Price = .[2], Change = .[3], Corr30 = .[4], HV30 = .[5])) %>%
DT::datatable()
